webpackHotUpdate("admin",{

/***/ "./src/admin/components/Address.js":
/*!*****************************************!*\
  !*** ./src/admin/components/Address.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var antd_es_popconfirm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd/es/popconfirm */ \"./node_modules/antd/es/popconfirm/index.js\");\n/* harmony import */ var antd_es_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd/es/button */ \"./node_modules/antd/es/button/index.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/index.js\");\n/* harmony import */ var _ModalAddAddress__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ModalAddAddress */ \"./src/admin/components/ModalAddAddress.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Address =\n/*#__PURE__*/\nfunction (_Component) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(Address, _Component);\n\n  function Address(props) {\n    var _this;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, Address);\n\n    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Address).call(this, props));\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_this), \"deleteAddress\", function (address) {\n      var id = address.id;\n      fetch('/admin/address/' + id, {\n        method: 'delete',\n        headers: {\n          'X-XSRF-TOKEN': _this.props.csrf\n        }\n      }).then(function () {\n        var addresses = _this.props.data.addresses.slice();\n\n        addresses = addresses.filter(function (a) {\n          return a.id !== id;\n        });\n\n        _this.props.handlerChangesData({\n          addresses: addresses\n        });\n      })[\"catch\"](function (e) {\n        if (e.error) _this.props.handlerChangesData(e.error);\n      });\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_this), \"openModalAddAddress\", function (address) {\n      console.log('address', address);\n\n      if (address) {\n        address['city'] = _this.props.data.city;\n      } else {\n        address = {\n          cityListId: _this.props.data.id,\n          city: _this.props.data.city\n        };\n      }\n\n      address['nameAddress'] = address.address;\n\n      _this.setState({\n        openMapData: address,\n        visibleAddAddress: true\n      } // this.state.modalAddAddress.current.renderMap\n      );\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_this), \"closeModalAddAddress\", function () {\n      _this.setState({\n        visibleAddAddress: false\n      });\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_this), \"renderMap\", function () {\n      console.log('render', _this.state.openMapData);\n      var openMapData = _this.state.openMapData;\n      var mapThis = map;\n      var timerId;\n      var coordParse = openMapData.coords ? JSON.parse(openMapData.coords) : null;\n\n      var renderMapInternal = function renderMapInternal() {\n        clearInterval(timerId);\n\n        if (!mapThis) {\n          mapThis = new ymaps.Map('map-modal', {\n            center: coordParse || [55.753994, 37.622093],\n            zoom: 17,\n            controls: ['zoomControl']\n          });\n          changeValue({\n            map: mapThis\n          });\n        }\n\n        if (!coordParse) {\n          var coords;\n          ymaps.geocode(data.city, {\n            results: 1\n          }).then(function (res) {\n            var firstGeoObject = res.geoObjects.get(0);\n            coords = firstGeoObject.geometry.getCoordinates();\n\n            var setCoordPoint = function setCoordPoint(e) {\n              mapThis.events.remove(\"click\", setCoordPoint);\n              var newCoords = e.get('coords');\n              ymaps.geocode(newCoords).then(function (res) {\n                var names = [];\n                res.geoObjects.each(function (obj) {\n                  names.push(obj.properties.get('name'));\n                });\n                if (names) changeValue({\n                  nameAddress: names[0],\n                  coord: newCoords\n                });\n              });\n\n              _this.setPoint(coords);\n            };\n\n            mapThis.setCenter(coords, 17);\n            mapThis.events.add('click', setCoordPoint);\n            changeValue({\n              map: mapThis\n            }); // this.setState({map});\n          });\n        } else {\n          _this.setPoint(coordParse);\n        }\n      };\n\n      timerId = setInterval(function () {\n        if (document.querySelector('#map-modal')) renderMapInternal();\n      }, 400);\n    });\n\n    _this.state = {\n      visibleAddAddress: false,\n      openMapData: {} // modalAddAddress: React.createRef()\n\n    };\n    return _this;\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(Address, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\"section\", null, this.props.data.addresses.map(function (address, idx) {\n        return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\"div\", {\n          key: idx\n        }, react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\"div\", {\n          className: \"a-row a-row--border\"\n        }, react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\"div\", {\n          className: \"a-col__1\"\n        }, react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\"p\", null, \"\\u0410\\u0434\\u0440\\u0435\\u0441 \", idx + 1, \":\")), react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\"div\", {\n          className: \"a-col__2\"\n        }, react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\"p\", {\n          className: \"text__p--blue\"\n        }, address.address)), react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          type: \"primary\",\n          onClick: _this2.openModalAddAddress.bind(_this2, address),\n          icon: react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__[\"FormOutlined\"], null)\n        }), react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(antd_es_popconfirm__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {\n          title: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C?\",\n          icon: react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__[\"QuestionCircleOutlined\"], {\n            style: {\n              color: 'red'\n            }\n          }),\n          okText: \"\\u0414\\u0430\",\n          cancelText: \"\\u041D\\u0435\\u0442\",\n          onConfirm: _this2.deleteAddress.bind(_this2, address)\n        }, react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          type: \"primary\",\n          icon: react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__[\"DeleteOutlined\"], null)\n        }))));\n      }), react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\"div\", {\n        className: \"a-btn\"\n      }, react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        type: \"primary\",\n        onClick: this.openModalAddAddress.bind(this, null)\n      }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0430\\u0434\\u0440\\u0435\\u0441\")), react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_ModalAddAddress__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n        visibleAddAddress: this.state.visibleAddAddress,\n        data: this.state.openMapData,\n        csrf: this.props.csrf,\n        cancelAddAddress: this.closeModalAddAddress,\n        handlerChangesData: this.props.handlerChangesData\n      }));\n    }\n  }]);\n\n  return Address;\n}(react__WEBPACK_IMPORTED_MODULE_9__[\"Component\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Address);\n\n//# sourceURL=webpack:///./src/admin/components/Address.js?");

/***/ }),

/***/ "./src/admin/components/ModalAddAddress.js":
/*!*************************************************!*\
  !*** ./src/admin/components/ModalAddAddress.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var antd_es_modal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd/es/modal */ \"./node_modules/antd/es/modal/index.js\");\n/* harmony import */ var antd_es_input__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd/es/input */ \"./node_modules/antd/es/input/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var antd_es_message__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd/es/message */ \"./node_modules/antd/es/message/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\n\n// class ModalAddAddress extends Component {\n// constructor(props) {\n//   super(props);\n//   this.state = {\n//     nameAddress:        '',\n//     coord:              '',\n//     map:                null,\n//     placemark:          null,\n//   }\n// }\nfunction ModalAddAddress(_ref) {\n  var map = _ref.map,\n      placemark = _ref.placemark,\n      coord = _ref.coord,\n      _cancelAddAddress = _ref.cancelAddAddress,\n      csrf = _ref.csrf,\n      data = _ref.data,\n      handlerChangesData = _ref.handlerChangesData,\n      changeValue = _ref.changeValue,\n      visibleAddAddress = _ref.visibleAddAddress;\n\n  error = function error(msg) {\n    antd_es_message__WEBPACK_IMPORTED_MODULE_4__[\"default\"].error(msg);\n  };\n\n  success = function success(msg) {\n    antd_es_message__WEBPACK_IMPORTED_MODULE_4__[\"default\"].success(msg);\n  };\n\n  _cancelAddAddress = function cancelAddAddress() {\n    map.geoObjects.remove(placemark);\n\n    _cancelAddAddress();\n  };\n\n  onOk =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n    /*#__PURE__*/\n    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              fetch('/admin/address', {\n                method: 'post',\n                headers: {\n                  'Content-Type': 'application/json;charset=utf-8',\n                  'X-XSRF-TOKEN': csrf\n                },\n                body: JSON.stringify({\n                  id: data.id,\n                  address: data.nameAddress,\n                  coords: JSON.stringify(coord),\n                  cityListId: data.cityListId\n                })\n              }).then(function (res) {\n                return res.json();\n              }).then(function (_ref3) {\n                var result = _ref3.result;\n                if (result) handlerChangesData({\n                  addresses: result\n                });\n              })[\"catch\"](function (e) {\n                if (e.error) handlerChangesData(e.error);\n              });\n\n              _cancelAddAddress();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onOk() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  setPoint = function setPoint(c) {\n    var plcmark;\n\n    if (!plcmark) {\n      plcmark = new ymaps.Placemark(c, {\n        iconColor: '#00c2ff'\n      }, {\n        preset: 'islands#blueDotIcon',\n        draggable: true\n      });\n      changeValue({\n        placemark: plcmark\n      });\n    } else {\n      plcmark = placemark;\n      plcmark.geometry.setCoordinates(c);\n    }\n\n    map.geoObjects.add(plcmark);\n    plcmark.events.add('drag', function () {\n      var coordPopint = plcmark.geometry.getCoordinates();\n      ymaps.geocode(coordPopint).then(function (res) {\n        var names = [];\n        res.geoObjects.each(function (obj) {\n          names.push(obj.properties.get('name'));\n        });\n        if (names) changeValue({\n          nameAddress: names[0],\n          coord: coordPopint\n        }, 'data');\n      });\n    });\n  };\n\n  changeAddress = function changeAddress(value) {\n    changeValue({\n      nameAddress: value\n    }, 'data'); // this.setState({nameAddress: value});\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(antd_es_modal__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {\n    visible: visibleAddAddress,\n    title: data.coords ? 'Редактировать адрес' : 'Добавить адрес',\n    okText: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",\n    cancelText: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\",\n    onCancel: _cancelAddAddress,\n    onOk: onOk\n  }, react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"a-modal__address\"\n  }, react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"p\", null, \"\\u0410\\u0434\\u0440\\u0435\\u0441:\"), react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n    name: \"address\",\n    value: data.nameAddress,\n    defaultValue: data.nameAddress,\n    onChange: changeAddress\n  })), react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    id: \"map-modal\",\n    className: \"a-modal__map\"\n  }));\n}\n\n;\n/* harmony default export */ __webpack_exports__[\"default\"] = (ModalAddAddress);\n\n//# sourceURL=webpack:///./src/admin/components/ModalAddAddress.js?");

/***/ })

})